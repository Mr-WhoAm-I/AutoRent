<Window x:Class="CarRental.UI.Views.CarDetailsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Карточка автомобиля" Height="700" Width="1000"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize" WindowStyle="None"
        AllowsTransparency="True" Background="Transparent">

    <Border Background="White" CornerRadius="15" BorderBrush="#DDD" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="5" Opacity="0.4"/>
        </Border.Effect>

        <Grid Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Grid>
                <StackPanel Orientation="Horizontal">
                    <Border Width="100" Height="60" CornerRadius="8" Background="#EEE" Margin="0,0,20,0">
                        <Image x:Name="CarImage" Stretch="UniformToFill"/>
                    </Border>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock x:Name="CarTitle" Text="Hyundai Solaris" FontSize="24" FontWeight="Bold"/>
                        <StackPanel Orientation="Horizontal">
                            <Border Background="#F3F4F6" CornerRadius="4" Padding="5,2" Margin="0,5,10,0">
                                <TextBlock x:Name="CarPlate" Text="A123AA777" FontSize="12" FontWeight="SemiBold"/>
                            </Border>
                            <TextBlock x:Name="CarClass" Text="Эконом" FontSize="12" Foreground="Gray" VerticalAlignment="Bottom"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
                <Button Content="✕" HorizontalAlignment="Right" VerticalAlignment="Top" 
                        Background="Transparent" BorderThickness="0" FontSize="20" Cursor="Hand" Click="Close_Click"/>
            </Grid>

            <TabControl Grid.Row="2" Margin="0,20,0,0" BorderThickness="0" Background="Transparent">
                <TabControl.Resources>
                    <Style TargetType="TabItem">
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="Padding" Value="15,10"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TabItem">
                                    <Grid>
                                        <Border x:Name="Border" BorderBrush="Transparent" BorderThickness="0,0,0,2" Margin="0,0,10,0">
                                            <ContentPresenter x:Name="ContentSite" VerticalAlignment="Center" HorizontalAlignment="Center" ContentSource="Header" Margin="10,5"/>
                                        </Border>
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="Border" Property="BorderBrush" Value="#4F46E5"/>
                                            <Setter Property="Foreground" Value="#4F46E5"/>
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="False">
                                            <Setter Property="Foreground" Value="Gray"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </TabControl.Resources>

                <TabItem Header="📄 Инфо и Бронирование">
                    <Grid Margin="0,20,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="1.2*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Margin="0,0,30,0">
                            <TextBlock Text="Характеристики" FontWeight="Bold" Margin="0,0,0,15"/>

                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Border Background="#FAFAFA" CornerRadius="8" Padding="15" Margin="0,0,5,0">
                                    <StackPanel>
                                        <TextBlock Text="ГОД ВЫПУСКА" FontSize="10" Foreground="Gray"/>
                                        <TextBlock x:Name="TxtYear" Text="2022" FontSize="16" FontWeight="Bold" Margin="0,5,0,0"/>
                                    </StackPanel>
                                </Border>
                                <Border Grid.Column="1" Background="#FAFAFA" CornerRadius="8" Padding="15" Margin="5,0,0,0">
                                    <StackPanel>
                                        <TextBlock Text="ПРОБЕГ" FontSize="10" Foreground="Gray"/>
                                        <TextBlock x:Name="TxtMileage" Text="45 000 км" FontSize="16" FontWeight="Bold" Margin="0,5,0,0"/>
                                    </StackPanel>
                                </Border>
                            </Grid>

                            <Border Background="#FAFAFA" CornerRadius="8" Padding="15" Margin="0,0,0,20">
                                <DockPanel>
                                    <StackPanel>
                                        <TextBlock Text="ТАРИФ" FontSize="10" Foreground="Gray"/>
                                        <TextBlock x:Name="TxtPrice" Text="2 500 ₽" FontSize="20" FontWeight="Bold" Foreground="#4F46E5" Margin="0,5,0,0"/>
                                    </StackPanel>
                                    <Border Background="#E0F2F1" CornerRadius="15" Padding="10,5" HorizontalAlignment="Right" VerticalAlignment="Center">
                                        <TextBlock x:Name="TxtStatus" Text="Свободен" Foreground="#009688" FontWeight="Bold"/>
                                    </Border>
                                </DockPanel>
                            </Border>

                            <TextBlock Text="Условия аренды" FontWeight="Bold" Margin="0,0,0,10"/>
                            <StackPanel>
                                <TextBlock Text="✅ Стаж вождения от 2 лет" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBlock Text="✅ Залог 10 000 ₽" Foreground="#555" Margin="0,0,0,5"/>
                                <TextBlock Text="✅ Скидка 10% от 3 дней" Foreground="#555"/>
                            </StackPanel>
                        </StackPanel>

                        <Border Grid.Column="1" Background="White" BorderBrush="#EEE" BorderThickness="1" CornerRadius="12" Padding="20">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="Декабрь 2025 г." FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,20"/>

                                <UniformGrid Grid.Row="1" Columns="7" Margin="0,0,0,10">
                                    <TextBlock Text="Пн" Foreground="Gray" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Вт" Foreground="Gray" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Ср" Foreground="Gray" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Чт" Foreground="Gray" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Пт" Foreground="Gray" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Сб" Foreground="Gray" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Вс" Foreground="Gray" HorizontalAlignment="Center"/>
                                </UniformGrid>

                                <UniformGrid x:Name="CalendarGrid" Grid.Row="2" Columns="7" Margin="0,0,0,20"/>

                                <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,0,0,20">
                                    <Rectangle Width="10" Height="10" Fill="#EEE" RadiusX="2" RadiusY="2" Margin="0,0,5,0"/>
                                    <TextBlock Text="Занято" FontSize="11" Margin="0,0,15,0"/>

                                    <Rectangle Width="10" Height="10" Fill="#4F46E5" RadiusX="2" RadiusY="2" Margin="0,0,5,0"/>
                                    <TextBlock Text="Выбор" FontSize="11"/>
                                </StackPanel>

                                <Button Grid.Row="4" Content="ОФОРМИТЬ АРЕНДУ" Style="{StaticResource TealButton}" Height="45" FontSize="14"/>
                            </Grid>
                        </Border>
                    </Grid>
                </TabItem>

                <TabItem Header="🛠 ТО и Ремонт">
                    <Grid Margin="0,20,0,0">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,10">
                                <TextBlock Text="+ Добавить запись" Foreground="#4F46E5" Cursor="Hand" TextDecorations="Underline"/>
                            </StackPanel>
                            <DataGrid x:Name="MaintenanceGrid" AutoGenerateColumns="False" IsReadOnly="True" Height="400">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Дата" Binding="{Binding DateStart, StringFormat=d}" Width="100"/>
                                    <DataGridTextColumn Header="Вид работ" Binding="{Binding ServiceType}" Width="150" FontWeight="Bold"/>
                                    <DataGridTextColumn Header="Описание" Binding="{Binding Description}" Width="*"/>
                                    <DataGridTextColumn Header="Стоимость" Binding="{Binding Cost, StringFormat={}{0:N2} ₽}" Width="100"/>
                                    <DataGridTextColumn Header="Ответственный" Binding="{Binding MechanicName}" Width="150"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </Grid>
                </TabItem>

                <TabItem Header="🛡 Страховка">
                    <Grid Margin="0,20,0,0">
                        <TextBlock Text="Здесь будет список страховых полисов..." Foreground="Gray" HorizontalAlignment="Center"/>
                    </Grid>
                </TabItem>
            </TabControl>
        </Grid>
    </Border>
</Window>