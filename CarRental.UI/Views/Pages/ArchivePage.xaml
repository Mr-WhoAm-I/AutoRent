<Page x:Class="CarRental.UI.Views.Pages.ArchivePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:hc="https://handyorg.github.io/handycontrol"
      Title="Архив" FontFamily="Segoe UI" Loaded="Page_Loaded">

    <Grid Margin="0,0,10,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Архив данных" FontSize="26" FontWeight="Bold" Foreground="#333" Margin="0,0,0,20"/>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Background="White" CornerRadius="10" BorderBrush="#EEE" BorderThickness="1" Margin="0,0,20,0">
                <ListBox x:Name="MenuListBox" BorderThickness="0" Background="Transparent" 
                         Padding="10" SelectionChanged="MenuListBox_SelectionChanged">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Padding" Value="15,10"/>
                            <Setter Property="FontSize" Value="14"/>
                            <Setter Property="Cursor" Value="Hand"/>
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                        <Border x:Name="bd" CornerRadius="6" Background="Transparent" Padding="{TemplateBinding Padding}">
                                            <ContentPresenter/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter TargetName="bd" Property="Background" Value="{StaticResource GreenHoverBrush}"/>
                                                <Setter Property="Foreground" Value="{StaticResource GreenAccentBrush}"/>
                                                <Setter Property="FontWeight" Value="SemiBold"/>
                                            </Trigger>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bd" Property="Background" Value="#F5F5F5"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListBox.ItemContainerStyle>

                    <ListBoxItem Content="Клиенты (В архиве)" Tag="Clients"/>
                    <ListBoxItem Content="Сотрудники (Уволенные)" Tag="Employees"/>
                    <ListBoxItem Content="Автомобили (Списанные)" Tag="Cars"/>
                    <ListBoxItem Content="История страховок" Tag="Insurance"/>
                    <ListBoxItem Content="История обслуживания" Tag="Maintenance"/>
                </ListBox>
            </Border>

            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <DataGrid x:Name="GridClients" Grid.Row="0" Style="{StaticResource ModernDataGrid}" Visibility="Collapsed"
                          MouseDoubleClick="GridClients_MouseDoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ФИО" Binding="{Binding FullName}" Width="250" FontWeight="SemiBold"/>
                        <DataGridTextColumn Header="Телефон" Binding="{Binding Phone}" Width="140"/>
                        <DataGridTextColumn Header="Почта" Binding="{Binding Email}" Width="180"/>
                        <DataGridTextColumn Header="Возраст" Binding="{Binding Age}" Width="80"/>
                    </DataGrid.Columns>
                </DataGrid>

                <DataGrid x:Name="GridEmployees" Grid.Row="0" Style="{StaticResource ModernDataGrid}" Visibility="Collapsed"
                          MouseDoubleClick="GridEmployees_MouseDoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ФИО" Binding="{Binding FullName}" Width="200" FontWeight="SemiBold"/>
                        <DataGridTextColumn Header="Должность" Binding="{Binding Position}" Width="150"/>
                        <DataGridTextColumn Header="Роль" Binding="{Binding RoleName}" Width="120"/>
                        <DataGridTextColumn Header="Логин" Binding="{Binding Login}" Width="120"/>
                    </DataGrid.Columns>
                </DataGrid>

                <DataGrid x:Name="GridCars" Grid.Row="0" Style="{StaticResource ModernDataGrid}" Visibility="Collapsed"
                          MouseDoubleClick="GridCars_MouseDoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Автомобиль" Binding="{Binding DisplayNameShort}" Width="*" FontWeight="SemiBold"/>
                        <DataGridTextColumn Header="Гос. номер" Binding="{Binding PlateNumber}" Width="120"/>
                        <DataGridTextColumn Header="Год" Binding="{Binding Year}" Width="80"/>
                        <DataGridTextColumn Header="Пробег" Binding="{Binding Mileage, StringFormat={}{0} км}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>

                <DataGrid x:Name="GridInsurance" Grid.Row="0" Style="{StaticResource ModernDataGrid}" Visibility="Collapsed"
                          MouseDoubleClick="GridInsurance_MouseDoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Полис" Binding="{Binding PolicyNumber}" FontWeight="Bold" Width="150"/>
                        <DataGridTextColumn Header="Автомобиль" Binding="{Binding CarName}" Width="200"/>
                        <DataGridTextColumn Header="Тип" Binding="{Binding Type}" Width="100"/>
                        <DataGridTextColumn Header="Окончание" Binding="{Binding EndDate, StringFormat=dd.MM.yyyy}" Width="120"/>
                        <DataGridTextColumn Header="Стоимость" Binding="{Binding Cost, StringFormat={}{0:N2} BYN}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>

                <DataGrid x:Name="GridMaintenance" Grid.Row="0" Style="{StaticResource ModernDataGrid}" Visibility="Collapsed"
                          MouseDoubleClick="GridMaintenance_MouseDoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Дата" Binding="{Binding DateStart, StringFormat=dd.MM.yyyy}" FontWeight="Bold" Width="100"/>
                        <DataGridTextColumn Header="Автомобиль" Binding="{Binding CarName}" Width="200"/>
                        <DataGridTextColumn Header="Тип" Binding="{Binding ServiceType}" Width="150"/>
                        <DataGridTextColumn Header="Механик" Binding="{Binding MechanicFullName}" Width="180"/>
                        <DataGridTextColumn Header="Стоимость" Binding="{Binding Cost, StringFormat={}{0:N2} BYN}" Width="100"/>
                        <DataGridTextColumn Header="Описание" Binding="{Binding Description}" Width="*" ElementStyle="{StaticResource WrapTextCell}"/>
                    </DataGrid.Columns>
                </DataGrid>

                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
                    <TextBlock Text="* Выберите запись, чтобы вернуть ее в работу" Foreground="Gray" VerticalAlignment="Center" Margin="0,0,15,0" FontStyle="Italic"/>
                    <Button x:Name="BtnRestore" Content="Восстановить из архива" 
                            Style="{StaticResource ButtonPrimary}" Background="#FFA000" BorderBrush="#FFA000"
                            Height="40" Padding="20,0" Click="Restore_Click"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</Page>