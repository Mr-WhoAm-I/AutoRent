<Window x:Class="CarRental.UI.Views.Windows.CarWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        Title="Автомобиль" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        MouseDown="Window_MouseDown" FontFamily="Segoe UI">

    <Border Background="White" CornerRadius="15" BorderBrush="#E0E0E0" BorderThickness="1" Margin="10">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="5" Opacity="0.3" Color="#000"/>
        </Border.Effect>

        <Grid Margin="25">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"/>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="250"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Text="Фотография" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                <Border Grid.Row="1" CornerRadius="10" Background="#F5F7FA" BorderBrush="#E0E0E0" BorderThickness="1" ClipToBounds="True">
                    <Image x:Name="ImgPreview" Stretch="UniformToFill" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                </Border>

                <Grid Grid.Row="2" Margin="0,20,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBox x:Name="TxtPhotoPath" Style="{StaticResource FloatingHintTextBox}" Tag="Ссылка на фото"
                             VerticalAlignment="Top" IsReadOnly="True"/>

                    <Button Grid.Column="1" Content="📂" Width="50" Height="50" Margin="10,5,0,0"
                            Style="{StaticResource ButtonPrimary}" Background="{StaticResource GreenGradientBrush}"
                            BorderThickness="0" FontSize="18" ToolTip="Выбрать файл"
                            Click="BrowsePhoto_Click"/>
                </Grid>

                <TextBlock Grid.Row="3" Text="Нажмите на кнопку папки, чтобы выбрать изображение с компьютера, или вставьте ссылку." 
                           TextWrapping="Wrap" Foreground="#999" FontSize="12" Margin="0,10,0,0" VerticalAlignment="Top"/>
            </Grid>

            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid Margin="0,0,0,10">
                    <TextBlock x:Name="TitleText" Text="Новый автомобиль" FontSize="24" FontWeight="Bold" Foreground="#333"/>
                    <Button Content="✕" HorizontalAlignment="Right" VerticalAlignment="Top"
                            Style="{StaticResource WindowControlButtonStyle}" Foreground="#999" Click="Close_Click"/>
                </Grid>

                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Hidden" Margin="0,10,0,20">
                    <StackPanel>
                        <TextBlock Text="Основные данные" FontWeight="SemiBold" Foreground="#555"/>
                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="15"/>
                                <ColumnDefinition Width="1.5*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="15"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <ComboBox x:Name="ComboBrand" Style="{StaticResource FloatingHintComboBox}" Tag="Марка"
                                      DisplayMemberPath="Name" SelectedValuePath="Id" Grid.Column="0"/>

                            <TextBox x:Name="TxtModel" Style="{StaticResource FloatingHintTextBox}" Tag="Модель" Grid.Column="2"/>

                            <TextBox x:Name="TxtPlate" Style="{StaticResource FloatingHintTextBox}" Tag="Гос. номер" Grid.Row="2" Grid.Column="0"
                                     TextChanged="TxtPlate_TextChanged" MaxLength="12"/>

                            <TextBox x:Name="TxtYear" Style="{StaticResource FloatingHintTextBox}" Tag="Год выпуска" Grid.Row="2" Grid.Column="2"
                                     PreviewTextInput="NumberValidation" MaxLength="4"/>
                        </Grid>

                        <TextBlock Text="Характеристики" FontWeight="SemiBold" Foreground="#555"/>
                        <Grid Margin="0,0,0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="15"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="15"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <ComboBox x:Name="ComboBody" Style="{StaticResource FloatingHintComboBox}" Tag="Кузов"
                                      DisplayMemberPath="Name" SelectedValuePath="Id" Grid.Row="0" Grid.Column="0"/>

                            <ComboBox x:Name="ComboTrans" Style="{StaticResource FloatingHintComboBox}" Tag="Коробка"
                                      DisplayMemberPath="Name" SelectedValuePath="Id" Grid.Row="0" Grid.Column="2"/>

                            <ComboBox x:Name="ComboFuel" Style="{StaticResource FloatingHintComboBox}" Tag="Топливо"
                                      DisplayMemberPath="Name" SelectedValuePath="Id" Grid.Row="2" Grid.Column="0"/>

                            <TextBox x:Name="TxtMileage" Style="{StaticResource FloatingHintTextBox}" Tag="Пробег (км)" Grid.Row="2" Grid.Column="2"
                                     PreviewTextInput="NumberValidation"/>
                        </Grid>

                        <TextBlock Text="Тарификация" FontWeight="SemiBold" Foreground="#555"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="15"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <ComboBox x:Name="ComboClass" Style="{StaticResource FloatingHintComboBox}" Tag="Класс авто"
                                      DisplayMemberPath="Name" SelectedValuePath="Id" Grid.Row="0" Grid.Column="0"/>

                            <TextBox x:Name="TxtPrice" Style="{StaticResource FloatingHintTextBox}" Tag="Цена за сутки (BYN)" Grid.Row="0" Grid.Column="2"
                                     PreviewTextInput="NumberValidation"/>

                            <ComboBox x:Name="ComboStatus" Style="{StaticResource FloatingHintComboBox}" Tag="Текущий статус"
                                      DisplayMemberPath="Name" SelectedValuePath="Id" 
                                      Grid.Row="1" Grid.Column="0" Margin="0,15,0,0"
                                      Visibility="Collapsed"/>
                        </Grid>

                    </StackPanel>
                </ScrollViewer>

                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Отмена" Width="120" Height="45" Margin="0,0,15,0"
                            Style="{StaticResource ButtonDashed}" BorderBrush="#DDD" Foreground="Gray"
                            Click="Close_Click"/>

                    <Button Content="Сохранить" Width="160" Height="45"
                            Style="{StaticResource ButtonPrimary}" Background="{StaticResource GreenGradientBrush}"
                            BorderThickness="0" FontWeight="SemiBold" FontSize="15"
                            Click="Save_Click"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>